(function($){var $scrollTo=$.scrollTo=function(target,duration,settings){$(window).scrollTo(target,duration,settings)};$scrollTo.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1};$scrollTo.window=function(scope){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var elem=this,isWin=!elem.nodeName||$.inArray(elem.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return elem;var doc=(elem.contentWindow||elem).document||elem.ownerDocument||elem;return $.browser.safari||doc.compatMode=='BackCompat'?doc.body:doc.documentElement})};$.fn.scrollTo=function(target,duration,settings){if(typeof duration=='object'){settings=duration;duration=0};if(typeof settings=='function')settings={onAfter:settings};if(target=='max')target=9e9;settings=$.extend({},$scrollTo.defaults,settings);duration=duration||settings.speed||settings.duration;settings.queue=settings.queue&&settings.axis.length>1;if(settings.queue)duration/=2;settings.offset=both(settings.offset);settings.over=both(settings.over);return this._scrollable().each(function(){var elem=this,$elem=$(elem),targ=target,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break};targ=$(targ,this);case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()};$.each(settings.axis.split(''),function(i,axis){var Pos=axis=='x'?'Left':'Top',pos=Pos.toLowerCase(),key='scroll'+Pos,old=elem[key],max=$scrollTo.max(elem,axis);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(settings.margin){attr[key]-=parseInt(targ.css('margin'+Pos))||0;attr[key]-=parseInt(targ.css('border'+Pos+'Width'))||0};attr[key]+=settings.offset[pos]||0;if(settings.over[pos])attr[key]+=targ[axis=='x'?'width':'height']()*settings.over[pos]}else{var val=targ[pos];attr[key]=val.slice&&val.slice(-1)=='%'?parseFloat(val)/100*max:val};if(/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&settings.queue){if(old!=attr[key])animate(settings.onAfterFirst);delete attr[key]}});animate(settings.onAfter)
function animate(callback){$elem.animate(attr,duration,settings.easing,callback&&function(){callback.call(this,target,settings)})}}).end()};$scrollTo.max=function(elem,axis){var Dim=axis=='x'?'Width':'Height',scroll='scroll'+Dim;if(!$(elem).is('html,body'))return elem[scroll]-$(elem)[Dim.toLowerCase()]();var size='client'+Dim,html=elem.ownerDocument.documentElement,body=elem.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[size],body[size])}
function both(val){return typeof val=='object'?val:{top:val,left:val}}})(jQuery);(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY,track=function(ev){cX=ev.pageX;cY=ev.pageY},compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}},delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])},handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this)try{p=p.parentNode}catch(e){p=this};if(p==this)return false;var ev=jQuery.extend({},e),ob=this;if(ob.hoverIntent_t)ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1)ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1)ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}};return this.mouseover(handleHover).mouseout(handleHover)}})(jQuery);var EMAIL_SAVE=0,EMAIL_SHARE=1,EMAIL_CONTACTUS=2
function showEmailLightbox(type,url,label){var out='',w=500;switch(type){case EMAIL_SAVE:var title="<p class='first lightboxHeader centered'>Want to come back later?</p>",intro="<p>Send yourself a link to this page so you don't have to add your courses again the next time.</p>",form="<form><span>your email:</span><input type='text' name='email' id='email' tabindex='1'/><br/><input id='submit' type='submit' tabindex='2' value='Send'/></div></form>";out=title+intro+form;break;case EMAIL_SHARE:var title="<p class='first lightboxHeader centered'>"+label+"</p>",intro="<p class='centered'>Are your friends taking this course? E-mail them a link to this course so they can save on textbooks!</p>",form="<form><span>your name:</span><input type='text' name='yourname' id='yourname' tabindex='1'/><br/><span>friend's name:</span><input type='text' name='friendname' id='friendname' tabindex='2'/><br/><span>friend's email:</span><input type='text' name='friendemail' id='friendemail' tabindex='3'/><br/><input id='submit' type='submit' tabindex='4' value='Send'/></div></form>";out=title+intro+form;break;case EMAIL_CONTACTUS:var title="<p class='first lightboxHeader centered'>Contact Us</p>",intro="<p class='centered'>Do you have any questions, comments, or concerns about GetchaBooks?</p><p class='centered'>E-mail us at <a href='mailto:feedback@getchabooks.com' class='emailLink'>feedback@getchabooks.com</a>.</p>";out=title+intro;w=450;break};lightbox(out,{width:w,top:100})}
function isValidEmailAddress(emailAddress){var pattern=new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);return pattern.test(emailAddress)};$(document).ready(function(){$(window).resize(fixLightboxes);var touch;if(touch)jQuery.fx.off=true;$("span#privacypolicy").hoverIntent(function(){$(this).tooltip({side:"top",text:$(this).attr("data-text"),width:350,height:45,hover:true,canMouseIn:true});_gaq.push(['_trackPageview','/privacypolicy.html'])},closeHoverTooltips);$('#contactus').hoverIntent(function(){$(this).tooltip({side:"top",text:$(this).attr("data-text"),width:300,height:45,hover:true,canMouseIn:true});_gaq.push(['_trackPageview','/contactus.html'])},closeHoverTooltips);$("#logo").click(function(){_gaq.push(['_trackEvent','Breadcrumbs','Logo'])});$("#indexCrumb").click(function(){_gaq.push(['_trackEvent','Breadcrumbs','Start Over'])});$("#editCrumb").click(function(){_gaq.push(['_trackEvent','Breadcrumbs','Edit'])});$("#resultsCrumb").click(function(){_gaq.push(['_trackEvent','Breadcrumbs','Results'])});$("#footerFB").click(function(){_gaq.push(['_trackEvent','Viral','Facebook Footer'],['_trackPageview','/viral/footer/facebook'])});$("#footerTwitter").click(function(){_gaq.push(['_trackEvent','Viral','Twitter Footer'],['_trackPageview','/viral/footer/twitter'])})});if(!Array.indexOf)Array.prototype.indexOf=function(obj){for(var i=0;i<this.length;i++)if(this[i]==obj)return i;return -1}
function fixLightboxes(){if($("#message").length==1)positionLightbox()};var settings
function lightbox(data,options,callback){if($("#shade").length>0){hideLightbox(function(){createLightbox(data,options,callback)})}else createLightbox(data,options,callback,true)}
function filter_for_escape_key(e){if(e.keyCode==27)hideLightboxAndShade()}
function listen_for_escape_key(){$(document).bind('keyup',filter_for_escape_key)}
function unlisten_for_escape_key(){$(document).unbind('keyup',filter_for_escape_key)}
function createLightbox(data,options,callback,doCreateShade){var defaultTop=100;if(Globals.touch)defaultTop=80;settings=$.extend({width:730,top:defaultTop,easyDismiss:true},options||{});if(doCreateShade){var shade="<div id='shade'></div>";$(shade).appendTo("html").fadeIn('fast')};var content="<div id='message'>"+data+"</div>";$(content).width(settings.width).appendTo("body");positionLightbox();if(callback)callback();if(settings.easyDismiss)$("#shade").click(hideLightboxAndShade);if(Globals.touch)$("#shade").height(9001);listen_for_escape_key()}
function addCancelAndShow(top){var $message=$("#message");$message.fadeIn('fast');$("<img src='"+Globals.IMG_PATH+"cancel.png' id='cancel'/>").appendTo("#message").click(hideLightboxAndShade);$("#cancel").fadeIn('fast');positionCancel(top)}
function hideLightboxAndShade(){unlisten_for_escape_key();hideLightbox();hideShade()}
function hideLightbox(callbackFn){if($("#message").children("#recommendation").length)_gaq.push(['_trackEvent','Results','Closed recommendation lightbox']);$("#message").fadeOut('fast',function(){$(this).remove();if(callbackFn)callbackFn()})}
function hideShade(){$("#shade").fadeOut('fast',function(){$(this).remove()})}
function positionLightbox(doCreateShade){var $message=$('#message'),top=settings.top,left=($(document).width()-$message.width())/2,CANCEL=25,windowWidth=$(window).width(),messageWidth=$message.outerWidth();while(((left*2+CANCEL+messageWidth)>windowWidth)&&left>0)left--;$message.css('left',left);var windowHeight=$(window).height(),messageHeight=$message.outerHeight();while(((top+messageHeight)>windowHeight)&&top>CANCEL)top--;$message.css('top',top);if($("#cancel").length!=1){addCancelAndShow(top)}else positionCancel(top)}
function positionCancel(top){var $message=$('#message');$('#cancel').css("top",top-25).css("left",$message.offset().left+$message.outerWidth()-25)};var hoverTimer
function supportsRGBA(){if(!('result' in arguments.callee)){var scriptElement=document.getElementsByTagName('script')[0],prevColor=scriptElement.style.color,testColor='rgba(0, 0, 0, 0.5)';if(prevColor==testColor){arguments.callee.result=true}else{try{scriptElement.style.color=testColor}catch(e){};arguments.callee.result=scriptElement.style.color!=prevColor;scriptElement.style.color=prevColor}};return arguments.callee.result};jQuery.fn.tooltip=function(options,callback){var defaults={text:'fail.',side:'bottom',width:200,height:100,margin:5,tailOffset:0,important:false,hover:false,canMouseIn:false,autoHeight:false},opts=$.extend(defaults,options),parent,tailOffset=12,tailSize=30,tailIgnore=5,paddingSize=10;return this.each(function(event){if(!($(this).hasClass("hasTooltip"))||opts.hover){if(!opts.hover)closeTooltips();var position=getPosition(this),dim=getDimensions(),div=$("<div class='tooltip'></div>").css('left',position.x).css('top',position.y).css('height',dim.height).css('width',dim.width).appendTo($("body")),boxOffset=new Object();boxOffset.x=(opts.side=='right')?tailOffset:0;boxOffset.y=(opts.side=='bottom')?tailOffset:0;var box=$("<div class='content'></div>").html(opts.text).css('height',opts.height).css('width',opts.width).css('top',boxOffset.y).css('left',boxOffset.x).appendTo(div);if(opts.autoHeight){box.css('height','auto');div.css('height','auto');opts.height=box.height();dim=getDimensions();div.css('top',getPosition(this).y)};var tailObj=getTail(),tail=$("<div class='tail'></div>").css("top",tailObj.y).css("left",tailObj.x).appendTo(div);canvas=document.createElement('canvas');canvas.setAttribute('width',30);canvas.setAttribute('height',30);canvas.setAttribute('id','canvas');$(tail).append(canvas);if(typeof G_vmlCanvasManager!='undefined')canvas=G_vmlCanvasManager.initElement(canvas);context=canvas.getContext("2d");if(context){if(navigator.userAgent.toLowerCase().indexOf('msie 8')!=-1){context.fillStyle="rgba(0,0,0,0.9)"}else context.fillStyle="rgba(0,0,0,0.8)";context.shadowOffsetX=0;context.shadowOffsetY=0;context.shadowBlur=5;context.shadowColor="black";context.beginPath();context.moveTo(tailObj.pt1.x,tailObj.pt1.y);context.lineTo(tailObj.pt2.x,tailObj.pt2.y);context.lineTo(tailObj.pt3.x,tailObj.pt3.y);context.closePath();context.fill()};if(!opts.hover){if(opts.important){$(this).addClass("hasImportantTooltip");div.addClass("important")}else $(this).addClass("hasTooltip");if($("div.tooltip").size()>=1){$("body").bind('click',closeTooltips);$("body").bind('keyup',closeTooltips)}}else{div.addClass("hover");if(opts.canMouseIn)div.hover(function(){$(this).addClass("activeHover")},function(){$(this).removeClass("activeHover");closeHoverTooltips()})};var diff=($("#main").outerWidth()+$("#main").offset().left)-position.x;if(diff<opts.width){div.css('left',position.x+(diff-opts.width));tail.css('left',tailObj.x-(diff-opts.width))};var difference=$(window).height()+$(window).scrollTop()-(box.offset().top+box.outerHeight());if(difference<0){div.css('top',position.y+(difference-10));tail.css('top',tailObj.y-(difference-10))}}else if(!opts.hover)closeTooltips()})
function getDimensions(){var obj=new Object();obj.width=opts.width;obj.height=opts.height;switch(opts.side){case'top':case'bottom':obj.height+=tailOffset+paddingSize;break;case'left':case'right':obj.width+=tailOffset+paddingSize;break;default:break};return obj}
function getPosition(obj){var offset=$(obj).offset(),coords=new Object();coords.x=offset.left;coords.y=offset.top;switch(opts.side){case'left':coords.x-=opts.width+opts.margin+tailOffset+paddingSize;coords.y+=($(obj).outerHeight()-opts.height)/2;break;case'right':coords.x+=$(obj).outerWidth()+opts.margin;coords.y+=($(obj).outerHeight()-opts.height)/2;break;default:case'top':coords.x+=($(obj).outerWidth()-opts.width)/2;coords.y-=opts.height+opts.margin+tailOffset+paddingSize;break;case'bottom':coords.x+=($(obj).outerWidth()-opts.width)/2;coords.y+=$(obj).outerHeight()+opts.margin;break};return coords}
function getTail(){var realSize=tailSize-(2*tailIgnore),data=new Object();data.color="rgba(0,0,0,0.9)";data.pt1=new Object();data.pt2=new Object();data.pt3=new Object();if(!supportsRGBA())data.color="#000";var halfX=opts.width/2-tailOffset+opts.tailOffset,halfY=opts.height/2-tailOffset+opts.tailOffset;switch(opts.side){case'left':data.x=opts.width+paddingSize;data.y=halfY;data.pt1.x=tailSize+tailOffset;data.pt1.y=tailSize/2;data.pt2.x=realSize+tailIgnore;data.pt2.y=tailIgnore;data.pt3.x=data.pt2.x;data.pt3.y=data.pt2.y+realSize;break;break;case'right':data.x=-(tailOffset+1);data.y=halfY;data.pt1.x=tailOffset;data.pt1.y=tailSize/2;data.pt2.x=realSize+tailIgnore;data.pt2.y=tailIgnore;data.pt3.x=data.pt2.x;data.pt3.y=data.pt2.y+realSize;break;default:case'top':data.x=halfX;data.y=opts.height+paddingSize;data.pt1.x=tailSize/2;data.pt1.y=realSize/2;data.pt2.x=tailIgnore;data.pt2.y=0;data.pt3.x=data.pt2.x+realSize;data.pt3.y=data.pt2.y;break;case'bottom':data.x=halfX;data.y=-(tailOffset+1);data.pt1.x=tailSize/2;data.pt1.y=tailSize/2;data.pt2.x=tailIgnore;data.pt2.y=tailSize-tailIgnore;data.pt3.x=data.pt2.x+realSize;data.pt3.y=data.pt2.y;break};return data}}
function closeTooltips(){$("div.tooltip:not(.important,.hover)").each(function(){$(this).remove()});$(".hasTooltip").removeClass("hasTooltip");if($("div.tooltip:not(.important,.hover)").size()==0)$("body").unbind("click",closeTooltips)}
function closeImportantTooltips(fade){$("div.tooltip").each(function(){if(fade){$(this).fadeOut(function(){$(this).remove()})}else $(this).remove()});$(".hasImportantTooltip").removeClass("hasImportantTooltip")}
function closeHoverTooltips(){if(Globals.touch){hoverHelper()}else hoverTimer=setTimeout("hoverHelper()",100)}
function hoverHelper(){$('div.hover:not(.activeHover)').remove()};$.fn.fitText=function(desiredHeight){var font;return this.each(function(){font=parseFloat($(this).css('font-size'));if(!desiredHeight){while($(this).scrollHeight>$(this).clientHeight){alert($(this).scrollHeight);updateFont();$(this).css('font-size',font)}}else while($(this).outerHeight()>desiredHeight){updateFont();$(this).css('font-size',font)}})
function updateFont(){font*=0.9}}